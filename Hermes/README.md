# 🎵 Golem-Powered Blockchain Audio Aggregator

A system that aggregates blockchain data using Golem, analyzes it, and generates musical patterns in the Strudel language based on the analyzed data.

## 🎯 Overview

This project creates a complete pipeline that:
1. **Stores Orchestra Table** on Golem (blockchain → instrument mappings)
2. **Retrieves Blockchain Data** from various networks
3. **Stores Blockchain Data** on Golem for historical analysis
4. **Analyzes Data** to calculate KPIs (price changes, gas trends, etc.)
5. **Generates Strudel Audio Tracks** based on blockchain activity
6. **Stores Strudel Tracks** on Golem for sharing and playback

## 🏗️ Architecture

```
Orchestra Table (Golem) → Blockchain Data Retrieval → Blockchain Data Storage (Golem) 
→ Data Analysis → Strudel Audio Track Generation → Strudel Audio Table (Golem)
```

## 📁 Project Structure

```
Hermes/
├── main.py                 # Main entry point
├── orchestrator.py         # Main pipeline orchestrator
├── types.py               # Data models and types
├── golem_storage.py       # Golem DB storage operations
├── blockchain_client.py   # Blockchain data retrieval
├── data_analyzer.py       # KPI calculation and analysis
├── strudel_generator.py   # Strudel audio pattern generation
├── requirements.txt       # Python dependencies
├── env_example.txt        # Environment variables template
└── README.md             # This file
```

## 🚀 Quick Start

### 1. Install Dependencies

```bash
pip install -r requirements.txt
```

### 2. Set Up Environment

Copy the environment template and configure:

```bash
cp env_example.txt .env
```

Edit `.env` with your Golem DB credentials and API keys.

### 3. Run the Pipeline

```bash
python main.py
```

## 🔧 Configuration

### Environment Variables

- `PRIVATE_KEY`: Your Golem DB private key
- `RPC_URL`: Golem DB RPC endpoint
- `WS_URL`: Golem DB WebSocket endpoint
- `INFURA_PROJECT_ID`: Infura API key (optional)
- `ALCHEMY_API_KEY`: Alchemy API key (optional)
- `COINGECKO_API_KEY`: CoinGecko API key (optional)

### Orchestra Table

The system comes pre-configured with these blockchain-instrument mappings:

- **Ethereum** → Guitar (Moog sound profile)
- **Bitcoin** → Drum (BD sound profile)
- **Polygon** → Bass (GM Synth Bass sound profile)

## 🎵 Generated Strudel Code

The system generates dynamic Strudel patterns based on blockchain KPIs:

### Price Changes → Tempo
- Positive price change = faster tempo
- Negative price change = slower tempo

### Gas Fee Trends → Gain & Effects
- Rising gas fees = higher gain, distortion effects
- Falling gas fees = lower gain, reverb effects

### Transaction Volume → Rhythm Complexity
- High volume = complex rhythmic patterns
- Low volume = simple, sparse patterns

### Block Production Rate → Scale
- High block rate = major scales
- Low block rate = minor scales

## 📊 Data Flow

### 1. Orchestra Table Storage
- Stores blockchain-instrument mappings
- Defines sound profiles and RPC endpoints
- Acts as configuration for the entire pipeline

### 2. Blockchain Data Retrieval
- Fetches real-time data from multiple blockchains
- Collects price, volume, gas fees, transaction counts
- Aggregates data for analysis

### 3. Blockchain Data Storage
- Stores historical blockchain metrics on Golem
- Enables trend analysis and KPI calculation
- Provides data persistence across runs

### 4. Data Analysis
- Calculates price change percentages
- Analyzes gas fee trends
- Computes network activity scores
- Determines volatility indices

### 5. Strudel Track Generation
- Maps KPIs to musical parameters
- Generates dynamic Strudel code
- Creates both individual and multi-chain tracks

### 6. Strudel Track Storage
- Stores generated tracks on Golem
- Enables sharing and historical playback
- Maintains track metadata and source KPIs

## 🎼 Example Generated Strudel Code

```javascript
// Generated by Golem Blockchain Audio Aggregator
// Timestamp: 2024-01-01T12:00:00
// Chain: ethereum
// Instrument: guitar

samples('https://raw.githubusercontent.com/tidalcycles/Dirt-Samples/master/strudel.json')

stack(
    s("bd sd bd lt,hh*16").gain(0.65),
    s("lt sd, cp <- cp*2 - cp*4>").gain(0.52),
    samples({
        'moog': {
            'g2': 'moog/004_Mighty%20Guitar%20G2.wav',
            'g3': 'moog/005_Mighty%20Guitar%20G3.wav',
            'g4': 'moog/006_Mighty%20Guitar%20G4.wav',
        },
    }, 'github:tidalcycles/dirt-samples'),
    
    n("g4!2 <bb2 c3>!2, <c4@3 [<eb4 bb3> g4 f4]>")
    .s('moog')
    .clip(8)
    .gain(0.65),
    
    n("<0 -3>, 2 4 <[6,8] [7, 10] [10, 13]>")
    .scale("C:major/4")
    .sound("piano").gain(0.2),
    
    // ... more patterns based on blockchain activity
)
```

## 🔍 Monitoring and Analysis

The system provides detailed analysis of:

- **Price Changes**: 24-hour price change percentages
- **Gas Fee Trends**: Gas fee movement patterns
- **Transaction Volume**: Volume change analysis
- **Network Activity**: Composite activity scores
- **Volatility**: Price volatility indices
- **Liquidity**: Volume per transaction ratios

## 🎯 Key Features

- **Decentralized Storage**: All data stored on Golem network
- **Real-time Analysis**: Live blockchain data processing
- **Dynamic Music Generation**: KPIs directly influence musical output
- **Multi-chain Support**: Analyze multiple blockchains simultaneously
- **Historical Tracking**: Store and analyze historical patterns
- **Extensible Architecture**: Easy to add new blockchains and instruments

## 🛠️ Development

### Adding New Blockchains

1. Add entry to `orchestra_table` in `orchestrator.py`
2. Implement blockchain client methods in `blockchain_client.py`
3. Update price APIs in `blockchain_client.py`

### Adding New Instruments

1. Update `sound_profile` in orchestra table
2. Add sound samples to Strudel generator
3. Modify musical parameter calculations

### Customizing KPI Calculations

1. Modify methods in `data_analyzer.py`
2. Update musical parameter mappings in `strudel_generator.py`
3. Adjust Strudel code templates

## 📈 Output

The system generates:
- **Individual tracks** for each blockchain
- **Multi-chain tracks** combining all blockchains
- **Historical analysis** of blockchain trends
- **Musical patterns** that reflect network activity
- **Stored data** on Golem for future analysis

## 🎉 Getting Started

1. **Clone and setup** the project
2. **Configure** your Golem DB credentials
3. **Run** the pipeline: `python main.py`
4. **Listen** to the generated Strudel tracks
5. **Analyze** the blockchain data insights

The system will automatically:
- Connect to Golem DB
- Fetch blockchain data
- Analyze trends and patterns
- Generate musical tracks
- Store everything for future use

**Ready to turn blockchain data into music!** 🎵⛓️


